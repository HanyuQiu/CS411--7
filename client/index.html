<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UserLogin</title>
  <style>
    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      border: 1px solid black;
      padding: 8px;
      text-align: left;
    }

    th {
      background-color: transparen;
    }
  .favorite-btn {
    background-color: transparent;
    border: none;
    font-size: 18px;
  }

  .favorite-btn.favorited {
    color: #f2a32d;
  }
  </style>
</head>
<body>
  <h1>UserLogin</h1>
  <button id="login-button" onclick="location.href='login.html'">Login / Signup</button>
  <!-- <button id="add-pc-button" onclick="location.href='add_pc.html'">Add PC</button> -->

  <script>
    async function checkLoginStatus() {
      const response = await fetch('/check-login-status');
      const isLoggedIn = await response.json();

      const loginButton = document.getElementById('login-button');
      // const addPcButton = document.getElementById('add-pc-button');
      if (isLoggedIn) {
          loginButton.style.display = 'none';
          // addPcButton.style.display = 'block';
      } else {
          loginButton.style.display = 'block';
          // addPcButton.style.display = 'none';
      }
    }

    checkLoginStatus();

    async function editUser(row) {
      const newEmail = prompt('Enter new email:', row.email);
      const newPassword = prompt('Enter new password:', '');

      if (newEmail && newPassword) {
          const response = await fetch('/update-user', {
              method: 'PUT',
              headers: {
                  'Content-Type': 'application/json',
              },
              body: JSON.stringify({ id: row.id, email: newEmail, password: newPassword }),
          });

          if (response.ok) {
              location.reload();
          } else {
              alert('Error updating user');
          }
      }
    }

    async function deleteUser(userId) {
        if (confirm('Are you sure you want to delete this user?')) {
            const response = await fetch(`/delete-user/${userId}`, { method: 'DELETE' });

            if (response.ok) {
                location.reload();
            } else {
                alert('Error deleting user');
            }
        }
    }
    
  </script>
    <h1>Recipe Recommendation</h1>
    <div id="registration">
        <!-- Registration Form -->
    </div>
    <div id="ingredient-input">
        <input type="text" id="ingredient" placeholder="Input Ingredients">
        <button onclick="getRecipes()">Recommended Menu</button>
    </div>
    <div id="recipes">
        <!-- Recipe Display Area -->
    </div>

  </script>
</body>
</html>
